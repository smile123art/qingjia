(function(e) {
    function t(t) {
        for (var a, r, s = t[0], c = t[1], u = t[2], f = 0, d = []; f < s.length; f++)
            r = s[f],
            Object.prototype.hasOwnProperty.call(o, r) && o[r] && d.push(o[r][0]),
            o[r] = 0;
        for (a in c)
            Object.prototype.hasOwnProperty.call(c, a) && (e[a] = c[a]);
        l && l(t);
        while (d.length)
            d.shift()();
        return i.push.apply(i, u || []),
        n()
    }
    function n() {
        for (var e, t = 0; t < i.length; t++) {
            for (var n = i[t], a = !0, s = 1; s < n.length; s++) {
                var c = n[s];
                0 !== o[c] && (a = !1)
            }
            a && (i.splice(t--, 1),
            e = r(r.s = n[0]))
        }
        return e
    }
    var a = {}
      , o = {
        app: 0
    }
      , i = [];
    function r(t) {
        if (a[t])
            return a[t].exports;
        var n = a[t] = {
            i: t,
            l: !1,
            exports: {}
        };
        return e[t].call(n.exports, n, n.exports, r),
        n.l = !0,
        n.exports
    }
    r.m = e,
    r.c = a,
    r.d = function(e, t, n) {
        r.o(e, t) || Object.defineProperty(e, t, {
            enumerable: !0,
            get: n
        })
    }
    ,
    r.r = function(e) {
        "undefined" !== typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {
            value: "Module"
        }),
        Object.defineProperty(e, "__esModule", {
            value: !0
        })
    }
    ,
    r.t = function(e, t) {
        if (1 & t && (e = r(e)),
        8 & t)
            return e;
        if (4 & t && "object" === typeof e && e && e.__esModule)
            return e;
        var n = Object.create(null);
        if (r.r(n),
        Object.defineProperty(n, "default", {
            enumerable: !0,
            value: e
        }),
        2 & t && "string" != typeof e)
            for (var a in e)
                r.d(n, a, function(t) {
                    return e[t]
                }
                .bind(null, a));
        return n
    }
    ,
    r.n = function(e) {
        var t = e && e.__esModule ? function() {
            return e["default"]
        }
        : function() {
            return e
        }
        ;
        return r.d(t, "a", t),
        t
    }
    ,
    r.o = function(e, t) {
        return Object.prototype.hasOwnProperty.call(e, t)
    }
    ,
    r.p = "";
    var s = window["webpackJsonp"] = window["webpackJsonp"] || []
      , c = s.push.bind(s);
    s.push = t,
    s = s.slice();
    for (var u = 0; u < s.length; u++)
        t(s[u]);
    var l = c;
    i.push([0, "chunk-vendors"]),
    n()
}
)({
    0: function(e, t, n) {
        e.exports = n("56d7")
    },
    "06b6": function(e, t, n) {
        "use strict";
        n("b457")
    },
    2309: function(e, t, n) {},
    "490c": function(e, t, n) {
        "use strict";
        n("2309")
    },
    "4c4a": function(e, t, n) {
        e.exports = n.p + "img/banner.7f8b7d7b.jpg"
    },
    "51f2": function(e, t, n) {},
    "56d7": function(e, t, n) {
        "use strict";
        n.r(t);
        var a = {};
        n.r(a),
        n.d(a, "getUserInfo", (function() {
            return Te
        }
        ));
        var o = {};
        n.r(o),
        n.d(o, "fetchProfile", (function() {
            return Le
        }
        ));
        n("8a58");
        var i = n("e41f")
          , r = (n("5f5f"),
        n("f253"))
          , s = (n("e7e5"),
        n("d399"))
          , c = (n("4056"),
        n("44bf"))
          , u = (n("66cf"),
        n("343b"))
          , l = (n("ac1e"),
        n("543e"))
          , f = (n("9a83"),
        n("f564"))
          , d = (n("d1cf"),
        n("ee83"))
          , p = (n("38d5"),
        n("772a"))
          , v = (n("be7f"),
        n("565f"))
          , h = (n("66b9"),
        n("b650"))
          , m = (n("c3a6"),
        n("ad06"))
          , g = (n("e17f"),
        n("2241"))
          , w = (n("e260"),
        n("e6cf"),
        n("cca6"),
        n("a79d"),
        n("2b0e"))
          , _ = function() {
            var e = this
              , t = e.$createElement
              , n = e._self._c || t;
            return n("div", {
                attrs: {
                    id: "app"
                }
            }, [e.leaveCountDownSecond && (null !== e.leaveReturnSchoolType || e.isApprove) ? n("div", {
                staticClass: "routerViewContainer"
            }, [n("router-view")], 1) : e._e(), null !== e.leaveReturnSchoolType || e.isApprove ? e._e() : n("div", {
                staticClass: "boot"
            }, [e._m(0), e.inLoadingState ? n("div", {
                staticClass: "loadingContainer"
            }, [n("van-loading")], 1) : e._e(), n("ul", {
                staticClass: "menuList"
            }, e._l(e.leaveReturnType, (function(t) {
                return t.isShow ? n("li", {
                    on: {
                        click: function(n) {
                            return e.selectType(t)
                        }
                    }
                }, [e._v(e._s(t.name))]) : e._e()
            }
            )), 0)])])
        }
          , y = [function() {
            var e = this
              , t = e.$createElement
              , a = e._self._c || t;
            return a("div", {
                staticClass: "banner"
            }, [a("img", {
                attrs: {
                    src: n("4c4a"),
                    alt: ""
                }
            })])
        }
        ]
          , C = n("1da1")
          , S = n("5530")
          , T = (n("159b"),
        n("5319"),
        n("ac1f"),
        n("b0c0"),
        n("96cf"),
        n("2f62"))
          , b = {
            name: "app",
            components: {},
            props: {},
            data: function() {
                return {
                    inLoadingState: !0,
                    leaveReturnType: [{
                        name: "学生外出请假",
                        isShow: !1,
                        value: 0
                    }, {
                        name: "寒暑假离校申请",
                        isShow: !1,
                        value: 1
                    }, {
                        name: "临时入校办事",
                        isShow: !1,
                        value: 2
                    }]
                }
            },
            computed: Object(S["a"])(Object(S["a"])({}, Object(T["c"])(["leaveCountDownSecond", "actionType", "leaveReturnSchoolType"])), {}, {
                isApprove: function() {
                    return this.$route.path.indexOf("approve") > -1
                }
            }),
            methods: Object(S["a"])(Object(S["a"])({}, Object(T["b"])(["updateLeaveCountDownSecond", "updateActionType", "updateReturnSchoolTime", "updateLeaveReturnType"])), {}, {
                initFlow: function() {
                    document.title = "外出登记";
                    var e = this.$route.query.type;
                    console.log(e),
                    this.updateActionType(parseInt(e)),
                    this.fetchLeaveCountDown()
                },
                fetchLeaveCountDown: function() {
                    var e = this;
                    return Object(C["a"])(regeneratorRuntime.mark((function t() {
                        var n;
                        return regeneratorRuntime.wrap((function(t) {
                            while (1)
                                switch (t.prev = t.next) {
                                case 0:
                                    return t.next = 2,
                                    e.$axios.post(e.$apiConfig.REQUEST_URL + "/leave/config/leaveRegister_countdown_for_orcode");
                                case 2:
                                    n = t.sent,
                                    e.$apiConfig.resultHandle(n, (function(t) {
                                        e.updateLeaveCountDownSecond(parseInt(t.data[0][0])),
                                        e.updateReturnSchoolTime(parseInt(t.data[0][1]))
                                    }
                                    ));
                                case 4:
                                case "end":
                                    return t.stop()
                                }
                        }
                        ), t)
                    }
                    )))()
                },
                fetchFormTypeList: function() {
                    var e = this;
                    return Object(C["a"])(regeneratorRuntime.mark((function t() {
                        var n;
                        return regeneratorRuntime.wrap((function(t) {
                            while (1)
                                switch (t.prev = t.next) {
                                case 0:
                                    return t.next = 2,
                                    e.$axios.post(e.$apiConfig.REQUEST_URL + "/leave/system/config/list?type=" + e.actionType);
                                case 2:
                                    n = t.sent,
                                    e.$apiConfig.resultHandle(n, (function(t) {
                                        var n = t.data;
                                        e.inLoadingState = !1,
                                        n.forEach((function(t, n) {
                                            e.leaveReturnType[n].isShow = !!t
                                        }
                                        ))
                                    }
                                    ));
                                case 4:
                                case "end":
                                    return t.stop()
                                }
                        }
                        ), t)
                    }
                    )))()
                },
                selectType: function(e) {
                    (this.actionType || 0 === this.actionType) && (this.$router.replace("/index?type=".concat(this.actionType)),
                    this.updateLeaveReturnType(e.value),
                    document.title = e.name)
                }
            }),
            mounted: function() {
                this.initFlow(),
                this.fetchFormTypeList()
            }
        }
          , R = b
          , x = (n("06b6"),
        n("490c"),
        n("2877"))
          , I = Object(x["a"])(R, _, y, !1, null, "3a49982b", null)
          , L = I.exports
          , $ = n("9483");
        Object($["a"])("".concat("", "service-worker.js"), {
            ready: function() {
                console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")
            },
            registered: function() {
                console.log("Service worker has been registered.")
            },
            cached: function() {
                console.log("Content has been cached for offline use.")
            },
            updatefound: function() {
                console.log("New content is downloading.")
            },
            updated: function() {
                console.log("New content is available; please refresh.")
            },
            offline: function() {
                console.log("No internet connection found. App is running in offline mode.")
            },
            error: function(e) {
                console.error("Error during service worker registration:", e)
            }
        });
        var O = n("8c4f")
          , j = function() {
            var e = this
              , t = e.$createElement
              , n = e._self._c || t;
            return n("div", {
                staticClass: "index"
            }, [n("div", {
                staticClass: "formItem"
            }, [n("div", {
                staticClass: "title"
            }, [e._m(0), n("p", [n("i", {
                staticClass: "iconfont iconshuaxin1",
                class: {
                    on: e.inLoading
                },
                on: {
                    click: e.initLocation
                }
            }), n("span", {
                class: {
                    err: !e.isAddressVaild
                }
            }, [e._v(e._s(e.currAddress || "正在加载位置..."))])])])]), n("div", {
                staticClass: "formList formItem"
            }, [e._m(1), !e.leaveFormList.length && e.inLoading ? n("div", {
                staticClass: "loading"
            }, [e._v("Loading...")]) : e._e(), e.isAddressVaild ? n("ul", e._l(e.leaveFormList, (function(t) {
                return n("li", {
                    class: {
                        leave: 0 === t.status || 6 === t.status || 4 === t.status,
                        blue: 2 === t.status || 5 === t.status
                    },
                    on: {
                        click: function(n) {
                            return e.setSelectLeaveForm(t)
                        }
                    }
                }, [n("span", {
                    staticClass: "state"
                }, [e._v(e._s(e.getStateDesc(t.status, e.actionType, e.leaveReturnSchoolType)))]), n("div", {
                    staticClass: "content"
                }, [n("h3", [e._v("假条编号：" + e._s(t.processInstId) + " ")]), n("p", [e._v("事由：" + e._s(t.outReason))]), n("p", [e._v("去向：" + e._s(t.outAddress))]), n("p", [e._v("假期：" + e._s(t.startTime) + "~" + e._s(t.endTime))])]), n("span", {
                    staticClass: "select",
                    class: {
                        on: e.selectLeaveForm === t.processInstId
                    }
                }, [n("van-icon", {
                    attrs: {
                        name: "checked"
                    }
                })], 1)])
            }
            )), 0) : e._e()]), n("div", {
                staticClass: "btnContainer"
            }, [n("van-button", {
                attrs: {
                    type: "info",
                    size: "small",
                    block: ""
                },
                on: {
                    click: e.confirmLeave
                }
            }, [e._v(e._s(e.actionType ? "确认返校" : "确认外出"))]), n("p", {
                staticClass: "notice"
            }, [e._v("警告：一旦确认外出，" + e._s(e.leaveCountDownSecond) + "秒内必须" + e._s(e.actionType ? "进入" : "离开") + "学校，否则请假失效！")])], 1)])
        }
          , E = [function() {
            var e = this
              , t = e.$createElement
              , n = e._self._c || t;
            return n("p", [e._v("我的位置："), n("span", {
                staticClass: "xin"
            }, [e._v("*")])])
        }
        , function() {
            var e = this
              , t = e.$createElement
              , n = e._self._c || t;
            return n("div", {
                staticClass: "title"
            }, [n("p", [e._v("请选择假条："), n("span", {
                staticClass: "xin"
            }, [e._v("*")])])])
        }
        ]
          , k = (n("1276"),
        n("4de4"),
        n("d3b7"),
        n("a15b"),
        n("d81d"),
        n("99af"),
        new w["a"],
        {
            created: function() {},
            computed: Object(S["a"])({}, Object(T["c"])(["currAppId", "currFormId"])),
            methods: {
                toRoute: function(e) {
                    this.$route.fullPath !== e && this.$router.push(e)
                },
                toRouteReplace: function(e) {
                    this.$router.replace(e)
                }
            }
        });
        function D(e, t, n) {
            switch (e) {
            case 0:
                return "已失效";
            case 1:
                return "已通过";
            case 2:
                return "未开始";
            case 3:
                return "已返校";
            case 4:
                return 1 === t && 2 === n ? "未到返校时间" : "超期返校";
            case 5:
                return "超期未返校";
            case 6:
                return "超期未离校";
            case 7:
                return 1 === t && 2 === n ? "已通过待返校" : "已离校";
            default:
                return ""
            }
        }
        var A = {
            name: "index",
            mixins: [k],
            data: function() {
                return {
                    qywxConfig: {},
                    vaildAddressList: [],
                    leaveFormList: [],
                    selectLeaveForm: null,
                    currAddress: null,
                    allAddressList: "",
                    addressInfo: {
                        desc: null
                    },
                    inLoading: !1
                }
            },
            props: [],
            computed: Object(S["a"])(Object(S["a"])({}, Object(T["c"])(["leaveCountDownSecond", "actionType", "leaveReturnSchoolType"])), {}, {
                isAddressVaild: function() {
                    for (var e = this.vaildAddressList, t = 0; t < e.length; t++) {
                        var n = this.allAddressList.indexOf(e[t]);
                        if (n > -1)
                            return !0
                    }
                    return !1
                }
            }),
            watch: {},
            methods: {
                getStateDesc: D,
                initFlow: function() {
                    var e = this;
                    return Object(C["a"])(regeneratorRuntime.mark((function t() {
                        return regeneratorRuntime.wrap((function(t) {
                            while (1)
                                switch (t.prev = t.next) {
                                case 0:
                                    return e.fetchLeaveRegList(),
                                    e.fetchAddressList(),
                                    t.next = 4,
                                    e.fetchQywxInfo().catch((function() {}
                                    ));
                                case 4:
                                    e.qywxConfig = t.sent,
                                    e.initQywxEnv(),
                                    e.$apiConfig.debug && e.getLocationDesc(37.802634, 112.560822);
                                case 7:
                                case "end":
                                    return t.stop()
                                }
                        }
                        ), t)
                    }
                    )))()
                },
                fetchAddressList: function() {
                    var e = this;
                    return Object(C["a"])(regeneratorRuntime.mark((function t() {
                        var n;
                        return regeneratorRuntime.wrap((function(t) {
                            while (1)
                                switch (t.prev = t.next) {
                                case 0:
                                    return t.next = 2,
                                    e.$axios.post(e.$apiConfig.REQUEST_URL + "/leave/config/leaveRegister_address");
                                case 2:
                                    n = t.sent,
                                    e.$apiConfig.resultHandle(n, (function(t) {
                                        e.vaildAddressList = t.data[0].split(",")
                                    }
                                    ));
                                case 4:
                                case "end":
                                    return t.stop()
                                }
                        }
                        ), t)
                    }
                    )))()
                },
                fetchLeaveRegList: function() {
                    var e = this;
                    return Object(C["a"])(regeneratorRuntime.mark((function t() {
                        var n, a;
                        return regeneratorRuntime.wrap((function(t) {
                            while (1)
                                switch (t.prev = t.next) {
                                case 0:
                                    return n = e.$qs.stringify({
                                        type: e.actionType,
                                        formSort: e.leaveReturnSchoolType
                                    }),
                                    console.log("this.leaveReturnSchoolType>>>", e.leaveReturnSchoolType),
                                    e.inLoading = !0,
                                    t.next = 5,
                                    e.$axios.post(e.$apiConfig.REQUEST_URL + "/leave/main/list?" + n);
                                case 5:
                                    a = t.sent,
                                    e.removeLoading(),
                                    e.$apiConfig.resultHandle(a, (function(t) {
                                        var n;
                                        n = 1 === e.actionType ? [3, 4, 5, 7] : [0, 1, 2, 6, 7],
                                        e.leaveFormList = t.data.filter((function(e) {
                                            return n.indexOf(e.status) > -1
                                        }
                                        ))
                                    }
                                    ));
                                case 8:
                                case "end":
                                    return t.stop()
                                }
                        }
                        ), t)
                    }
                    )))()
                },
                fetchQywxInfo: function() {
                    var e = this
                      , t = new Promise(function() {
                        var t = Object(C["a"])(regeneratorRuntime.mark((function t(n, a) {
                            var o, i;
                            return regeneratorRuntime.wrap((function(t) {
                                while (1)
                                    switch (t.prev = t.next) {
                                    case 0:
                                        return o = e.$qs.stringify({
                                            url: window.location.href.split("#")[0]
                                        }),
                                        t.next = 3,
                                        e.$axios.post(e.$apiConfig.REQUEST_URL + "/leave/config/getWechatConfigObj?" + o);
                                    case 3:
                                        i = t.sent,
                                        e.$apiConfig.resultHandle(i, (function(e) {
                                            n(e.data[0])
                                        }
                                        ));
                                    case 5:
                                    case "end":
                                        return t.stop()
                                    }
                            }
                            ), t)
                        }
                        )));
                        return function(e, n) {
                            return t.apply(this, arguments)
                        }
                    }());
                    return t
                },
                initQywxEnv: function() {
                    var e = this;
                    wx.config({
                        beta: !0,
                        debug: this.$apiConfig.debug,
                        appId: this.qywxConfig.appId,
                        timestamp: this.qywxConfig.timestamp,
                        nonceStr: this.qywxConfig.nonceStr,
                        signature: this.qywxConfig.signature,
                        jsApiList: ["getLocation", "getNetworkType"]
                    }),
                    wx.ready((function() {
                        console.log("企业微信初始化成功"),
                        e.initLocation()
                    }
                    )),
                    wx.error((function(e) {
                        console.log("企业微信初始化失败"),
                        console.log(e)
                    }
                    ))
                },
                removeLoading: function() {
                    var e = this;
                    setTimeout((function() {
                        e.inLoading = !1
                    }
                    ), 1e3)
                },
                initLocation: function() {
                    var e = this;
                    this.inLoading = !0,
                    wx.getLocation({
                        type: "gcj02",
                        success: function(t) {
                            console.log(t.latitude, t.longitude),
                            e.getLocationDesc(t.latitude, t.longitude)
                        },
                        fail: function(t) {
                            console.log("企业微信读位置失败：", t),
                            e.$dialog.alert({
                                title: "温馨提示",
                                message: "定位失败，请重试！"
                            }).then((function() {}
                            ))
                        }
                    })
                },
                getLocationDesc: function(e, t) {
                    var n = this;
                    return Object(C["a"])(regeneratorRuntime.mark((function a() {
                        var o, i, r;
                        return regeneratorRuntime.wrap((function(a) {
                            while (1)
                                switch (a.prev = a.next) {
                                case 0:
                                    o = "IS7BZ-AXUYG-PK5QZ-ITBJJ-TGHTE-QLFNT",
                                    i = "https://apis.map.qq.com/ws/geocoder/v1/",
                                    r = e + "," + t,
                                    n.$jsonp(i, {
                                        key: o,
                                        callbackName: "QQmap",
                                        output: "jsonp",
                                        location: r,
                                        get_poi: 1
                                    }).then((function(e) {
                                        var t = e.result;
                                        console.log("地址你解析成功：", e.result),
                                        n.currAddress = t.pois[0].title,
                                        n.allAddressList = t.pois.map((function(e) {
                                            return e.title
                                        }
                                        )).join(","),
                                        n.removeLoading(),
                                        n.$nextTick((function() {
                                            n.isAddressVaild ? n.$notify({
                                                type: "success",
                                                message: "成功获取位置！"
                                            }) : n.$notify("位置异常，请到校门口扫码！")
                                        }
                                        ))
                                    }
                                    )).catch((function(e) {
                                        console.log("地址你解析失败："),
                                        console.log(e)
                                    }
                                    ));
                                case 4:
                                case "end":
                                    return a.stop()
                                }
                        }
                        ), a)
                    }
                    )))()
                },
                setSelectLeaveForm: function(e) {
                    this.selectLeaveForm = e.processInstId
                },
                confirmLeave: function() {
                    this.selectLeaveForm ? this.isAddressVaild ? this.$router.replace("/result?processInstId=".concat(this.selectLeaveForm, "&type=").concat(this.actionType)) : this.$notify("位置异常，请到校门口扫码！") : this.$notify("请先选择请假单再确认外出！")
                }
            },
            filters: {},
            components: {},
            activated: function() {
                this.initFlow()
            },
            mounted: function() {
                this.initFlow()
            }
        }
          , q = A
          , F = (n("661a"),
        Object(x["a"])(q, j, E, !1, null, "da31045e", null))
          , U = F.exports
          , M = function() {
            var e = this
              , t = e.$createElement
              , n = e._self._c || t;
            return n("div", {
                staticClass: "result"
            }, [n("div", {
                staticClass: "userInfo"
            }, [n("div", {
                staticClass: "right"
            }, [n("img", {
                attrs: {
                    src: e.detailInfo.photo,
                    alt: ""
                }
            })]), n("div", {
                staticClass: "left"
            }, [n("h1", [e._v(e._s(e.detailInfo.userName))]), n("p", [e._v("学号：" + e._s(e.detailInfo.userId))]), n("p", [e._v("班级：" + e._s(e.detailInfo.className))]), n("p", [e._v("开始：" + e._s(e.detailInfo.startTime))]), n("p", [e._v("结束：" + e._s(e.detailInfo.endTime))])])]), n("div", {
                staticClass: "stateArea"
            }, [n("div", {
                staticClass: "background"
            }), "green" === e.getCodeState ? n("div", {
                staticClass: "qrContainer green"
            }, [n("div", {
                ref: "qrMainGreen",
                staticClass: "qrMainGreen qrMain"
            }, [n("img", {
                attrs: {
                    src: "",
                    alt: ""
                }
            })]), n("div", {
                staticClass: "timer"
            }, [e._v(" " + e._s(e.showSecond) + "S ")])]) : e._e(), "red" === e.getCodeState ? n("div", {
                staticClass: "qrContainer red"
            }, [n("i", {
                staticClass: "iconfont icon1"
            }), n("div", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: !1,
                    expression: "false"
                }],
                ref: "qrMainRed",
                staticClass: "qrMainRed qrMain"
            }, [n("img", {
                attrs: {
                    src: "",
                    alt: ""
                }
            })]), n("div", {
                staticClass: "timer"
            }, [e._v(" " + e._s(e.getStateDesc(e.detailInfo.status)) + " ")])]) : e._e(), "yellow" === e.getCodeState ? n("div", {
                staticClass: "qrContainer yellow"
            }, [n("i", {
                staticClass: "iconfont icon1"
            }), n("div", {
                directives: [{
                    name: "show",
                    rawName: "v-show",
                    value: !1,
                    expression: "false"
                }],
                ref: "qrMainYellow",
                staticClass: "qrMainYellow qrMain"
            }, [n("img", {
                attrs: {
                    src: "",
                    alt: ""
                }
            })]), n("div", {
                staticClass: "timer"
            }, [e._v(" " + e._s(e.getStateDesc(e.detailInfo.status)) + " ")])]) : e._e(), e.returnSchoolOutTime ? n("div", {
                staticClass: "connectTeacher"
            }, [n("button", {
                on: {
                    click: e.showConnectTeacher
                }
            }, [e._v("联系辅导员")])]) : e._e(), n("p", [e._v(e._s(e.getTimeData[0]) + " "), n("span", [e._v(e._s(e.getTimeData[1]))])])]), "green" === e.getCodeState ? n("p", {
                staticClass: "notice"
            }, [e._v(" 请尽快向保安人员出示当前页面，倒计时结束后页面将失效 ")]) : e._e(), e.returnSchoolOutTime ? n("p", {
                staticClass: "notice"
            }, [e._v(" 联系辅导员后请留意企业微信消息，辅导员确认后请于" + e._s(e.returnSchoolTime) + "分钟内进入学校! ")]) : e._e(), n("van-dialog", {
                attrs: {
                    title: "请填写延期原因",
                    "show-cancel-button": ""
                },
                on: {
                    confirm: e.connectTeacher,
                    cancel: function(t) {
                        e.isShowConnectTeacherBox = !1
                    }
                },
                model: {
                    value: e.isShowConnectTeacherBox,
                    callback: function(t) {
                        e.isShowConnectTeacherBox = t
                    },
                    expression: "isShowConnectTeacherBox"
                }
            }, [n("van-field", {
                attrs: {
                    rows: "2",
                    autosize: "",
                    type: "textarea",
                    placeholder: "请输入留言"
                },
                model: {
                    value: e.reason,
                    callback: function(t) {
                        e.reason = t
                    },
                    expression: "reason"
                }
            })], 1)], 1)
        }
          , Q = [];
        n("4d63"),
        n("25f0"),
        n("466d");
        function N(e, t, n) {
            var a = window.localStorage.__global__;
            a ? (a = JSON.parse(a),
            a[e] || (a[e] = {})) : (a = {},
            a[e] = {}),
            a[e][t] = n,
            window.localStorage.__global__ = JSON.stringify(a)
        }
        function V(e, t, n) {
            var a = window.localStorage.__global__;
            if (!a)
                return n;
            if (a = JSON.parse(a)[e],
            !a)
                return n;
            var o = a[t];
            return o || n
        }
        function P(e, t, n) {
            if (0 !== n) {
                var a = 24 * n * 60 * 60 * 1e3
                  , o = new Date(+new Date + a);
                document.cookie = e + "=" + escape(t) + ";expires=" + o.toUTCString()
            } else
                document.cookie = e + "=" + escape(t)
        }
        function H(e) {
            var t, n = new RegExp("(^| )" + e + "=([^;]*)(;|$)");
            return (t = document.cookie.match(n)) ? unescape(t[2]) : null
        }
        function B() {
            return H("token")
        }
        function z(e) {
            P("token", e, 0)
        }
        function G(e) {
            var t = new RegExp("(^|&)" + e + "=([^&]*)(&|$)","i")
              , n = -1 !== window.location.href.indexOf("?") ? window.location.href.split("?")[1] : ""
              , a = n.match(t);
            return null != a ? unescape(a[2]) : null
        }
        function J(e) {
            return e += "",
            ("00" + e).substr(e.length)
        }
        function Y(e) {
            var t = e.getFullYear()
              , n = J(e.getMonth() + 1)
              , a = J(e.getDate())
              , o = J(e.getHours())
              , i = J(e.getMinutes())
              , r = J(e.getSeconds());
            return "".concat(t, "-").concat(n, "-").concat(a, " ").concat(o, ":").concat(i, ":").concat(r)
        }
        var W = {
            name: "result",
            mixins: [k],
            data: function() {
                return {
                    showSecond: null,
                    resultVaild: !0,
                    processInstId: null,
                    detailInfo: {},
                    showCurrTime: "",
                    reason: null,
                    isShowConnectTeacherBox: !1
                }
            },
            props: [],
            computed: Object(S["a"])(Object(S["a"])({}, Object(T["c"])(["leaveCountDownSecond", "actionType", "returnSchoolTime", "leaveReturnSchoolType"])), {}, {
                getTimeData: function() {
                    return this.showCurrTime.split(" ")
                },
                getCodeState: function() {
                    switch (this.detailInfo.status) {
                    case 0:
                    case 4:
                    case 6:
                        return "red";
                    case 2:
                        return "yellow";
                    case 3:
                    case 7:
                        return "green"
                    }
                },
                returnSchoolOutTime: function() {
                    return 4 === this.detailInfo.status
                },
                getCodeStateColorValue: function() {
                    switch (this.getCodeState) {
                    case "red":
                        return "#FF0000";
                    case "yellow":
                        return "#EED400";
                    case "green":
                        return "#179702"
                    }
                },
                getCodeStateContainerRef: function() {
                    switch (this.getCodeState) {
                    case "red":
                        return "qrMainRed";
                    case "yellow":
                        return "qrMainYellow";
                    case "green":
                        return "qrMainGreen"
                    }
                }
            }),
            watch: {},
            methods: {
                getStateDesc: D,
                initFlow: function() {
                    var e = this;
                    return Object(C["a"])(regeneratorRuntime.mark((function t() {
                        return regeneratorRuntime.wrap((function(t) {
                            while (1)
                                switch (t.prev = t.next) {
                                case 0:
                                    return e.processInstId = e.$route.query.processInstId,
                                    e.getVaildCacheTime(),
                                    e.runCurrTime(),
                                    t.next = 5,
                                    e.fetchDetailInfo().catch((function() {}
                                    ));
                                case 5:
                                    e.detailInfo = t.sent,
                                    "green" === e.getCodeState && (N("config", "leaveTimeStamp" + e.processInstId, (new Date).getTime()),
                                    e.initTimer()),
                                    e.$nextTick((function() {
                                        e.fetchVerifyNumber()
                                    }
                                    ));
                                case 8:
                                case "end":
                                    return t.stop()
                                }
                        }
                        ), t)
                    }
                    )))()
                },
                runCurrTime: function() {
                    var e = this;
                    setInterval((function() {
                        e.showCurrTime = Y(new Date)
                    }
                    ), 1e3)
                },
                fetchDetailInfo: function() {
                    var e = this
                      , t = new Promise(function() {
                        var t = Object(C["a"])(regeneratorRuntime.mark((function t(n, a) {
                            var o, i;
                            return regeneratorRuntime.wrap((function(t) {
                                while (1)
                                    switch (t.prev = t.next) {
                                    case 0:
                                        return o = e.$qs.stringify({
                                            processInstId: e.processInstId,
                                            type: e.actionType,
                                            formSort: e.leaveReturnSchoolType
                                        }),
                                        t.next = 3,
                                        e.$axios.post(e.$apiConfig.REQUEST_URL + "/leave/main/detail?" + o);
                                    case 3:
                                        i = t.sent,
                                        e.$apiConfig.resultHandle(i, (function(e) {
                                            n(e.data[0])
                                        }
                                        ));
                                    case 5:
                                    case "end":
                                        return t.stop()
                                    }
                            }
                            ), t)
                        }
                        )));
                        return function(e, n) {
                            return t.apply(this, arguments)
                        }
                    }());
                    return t
                },
                getVaildCacheTime: function() {
                    var e = V("config", "leaveTimeStamp" + this.processInstId, !1);
                    if (e) {
                        var t = (new Date).getTime() - e
                          , n = this.leaveCountDownSecond - t / 1e3 | 0;
                        return console.log("vaildSecond", n),
                        n
                    }
                },
                initTimer: function() {
                    var e = this;
                    this.showSecond = this.leaveCountDownSecond;
                    var t = setInterval((function() {
                        if (e.showSecond <= 1)
                            return clearInterval(t),
                            void (e.detailInfo.status = 0);
                        e.showSecond--
                    }
                    ), 1e3)
                },
                showConnectTeacher: function() {
                    this.isShowConnectTeacherBox = !0
                },
                connectTeacher: function() {
                    var e = this;
                    return Object(C["a"])(regeneratorRuntime.mark((function t() {
                        var n, a;
                        return regeneratorRuntime.wrap((function(t) {
                            while (1)
                                switch (t.prev = t.next) {
                                case 0:
                                    if (e.reason) {
                                        t.next = 3;
                                        break
                                    }
                                    return e.$notify("请填写延期原因再提交！"),
                                    t.abrupt("return", !1);
                                case 3:
                                    return n = e.$qs.stringify({
                                        processInstId: e.processInstId,
                                        reason: e.reason,
                                        formSort: e.leaveReturnSchoolType
                                    }),
                                    t.next = 6,
                                    e.$axios.post(e.$apiConfig.REQUEST_URL + "/leave/delay/applicationDelay?" + n);
                                case 6:
                                    a = t.sent,
                                    e.$apiConfig.resultHandle(a, (function(t) {
                                        e.$notify({
                                            type: "success",
                                            message: "申请成功！请留意企业微信消息"
                                        })
                                    }
                                    ));
                                case 8:
                                case "end":
                                    return t.stop()
                                }
                        }
                        ), t)
                    }
                    )))()
                },
                fetchVerifyNumber: function() {
                    var e = this;
                    return Object(C["a"])(regeneratorRuntime.mark((function t() {
                        var n, a;
                        return regeneratorRuntime.wrap((function(t) {
                            while (1)
                                switch (t.prev = t.next) {
                                case 0:
                                    return t.next = 2,
                                    e.$axios.post(e.$apiConfig.VERIFY_REQUEST_URL + "/plus/api/getRandom");
                                case 2:
                                    n = t.sent,
                                    a = document.querySelector(".stateArea").offsetWidth,
                                    new QRCode(e.$refs[e.getCodeStateContainerRef],{
                                        text: n.data.msg,
                                        colorDark: e.getCodeStateColorValue,
                                        width: .8 * a,
                                        height: .8 * a,
                                        correctLevel: QRCode.CorrectLevel.H
                                    });
                                case 5:
                                case "end":
                                    return t.stop()
                                }
                        }
                        ), t)
                    }
                    )))()
                }
            },
            filters: {},
            components: {},
            activated: function() {
                this.initFlow()
            },
            mounted: function() {
                this.initFlow()
            }
        }
          , K = W
          , X = (n("b767"),
        Object(x["a"])(K, M, Q, !1, null, "ef7a4592", null))
          , Z = X.exports
          , ee = function() {
            var e = this
              , t = e.$createElement
              , n = e._self._c || t;
            return n("div", {
                staticClass: "approve"
            }, [n("div", {
                staticClass: "container"
            }, [n("h1", [e._v("是否同意该学生返校申请")]), n("ul", {
                staticClass: "infoList"
            }, [n("li", [n("span", [e._v("学生姓名：")]), n("span", [e._v(e._s(e.studentInfo.applyName))])]), n("li", [n("span", [e._v("延期原因：")]), n("span", [e._v(e._s(e.teacherInfo.reason))])]), n("li", [n("span", [e._v("学生学号：")]), n("span", [e._v(e._s(e.studentInfo.applyId))])]), n("li", [n("span", [e._v("学生班级：")]), n("span", [e._v(e._s(e.studentInfo.applyDepartment))])]), n("li", [n("span", [e._v("假条编号：")]), n("span", [e._v(e._s(e.studentInfo.processInstanceId))])]), n("li", [n("span", [e._v("外出地点：")]), n("span", [e._v(e._s(e.studentInfo.outProvince))])]), n("li", [n("span", [e._v("假期开始：")]), n("span", [e._v(e._s(e.studentInfo.leaveBeginTime))])]), n("li", [n("span", [e._v("假期结束：")]), n("span", [e._v(e._s(e.studentInfo.leaveEndTime))])])]), n("button", {
                staticClass: "confirmAction",
                on: {
                    click: e.confirmAction
                }
            }, [e._v("同意返校")])])])
        }
          , te = []
          , ne = {
            name: "approve",
            mixins: [k],
            data: function() {
                return {
                    messageId: null,
                    teacherInfo: {},
                    studentInfo: {}
                }
            },
            props: [],
            computed: {},
            watch: {},
            methods: {
                initFlow: function() {
                    this.messageId = this.$route.query.id,
                    this.fetchMessageDetail()
                },
                fetchMessageDetail: function() {
                    var e = this;
                    return Object(C["a"])(regeneratorRuntime.mark((function t() {
                        var n, a;
                        return regeneratorRuntime.wrap((function(t) {
                            while (1)
                                switch (t.prev = t.next) {
                                case 0:
                                    return n = e.$qs.stringify({
                                        id: e.messageId
                                    }),
                                    t.next = 3,
                                    e.$axios.post(e.$apiConfig.REQUEST_URL + "/leave/delay/getApplicationDelayInfo?" + n);
                                case 3:
                                    a = t.sent,
                                    e.$apiConfig.resultHandle(a, (function(t) {
                                        e.teacherInfo = t.data[0],
                                        e.teacherInfo.leaveRegister && (e.studentInfo = e.teacherInfo.leaveRegister)
                                    }
                                    ));
                                case 5:
                                case "end":
                                    return t.stop()
                                }
                        }
                        ), t)
                    }
                    )))()
                },
                confirmAction: function() {
                    var e = this;
                    this.$dialog.confirm({
                        title: "温馨提示",
                        message: "确认同意该学生返校？"
                    }).then(Object(C["a"])(regeneratorRuntime.mark((function t() {
                        var n, a;
                        return regeneratorRuntime.wrap((function(t) {
                            while (1)
                                switch (t.prev = t.next) {
                                case 0:
                                    return n = e.$qs.stringify({
                                        id: e.messageId
                                    }),
                                    t.next = 3,
                                    e.$axios.post(e.$apiConfig.REQUEST_URL + "/leave/delay/dealWithDelayApply?" + n);
                                case 3:
                                    a = t.sent,
                                    e.$apiConfig.resultHandle(a, (function(t) {
                                        e.$notify({
                                            type: "success",
                                            message: "已为该学生延长返校时间！"
                                        }),
                                        e.fetchMessageDetail()
                                    }
                                    ));
                                case 5:
                                case "end":
                                    return t.stop()
                                }
                        }
                        ), t)
                    }
                    )))).catch((function() {}
                    ))
                }
            },
            filters: {},
            components: {},
            activated: function() {
                this.initFlow()
            },
            mounted: function() {
                this.initFlow()
            }
        }
          , ae = ne
          , oe = (n("baac"),
        Object(x["a"])(ae, ee, te, !1, null, "7f7040a9", null))
          , ie = oe.exports;
        w["a"].use(O["a"]);
        var re = [{
            path: "/",
            redirect: "/index"
        }, {
            path: "/index",
            name: "index",
            component: U
        }, {
            path: "/result",
            name: "result",
            component: Z
        }, {
            path: "/approve",
            name: "approve",
            component: ie
        }]
          , se = new O["a"]({
            routes: re
        })
          , ce = se
          , ue = window.location.href
          , le = ue.indexOf("192.168") > -1
          , fe = le ? "http://noleave.sxu.edu.cn/leave" : "/leave"
          , de = "http://noleave.sxu.edu.cn/jcforms"
          , pe = "0"
          , ve = "1"
          , he = "/ehall/users?info="
          , me = "/ehall/small_routine?info="
          , ge = "//at.alicdn.com/t/font_1797153_bo17w63n6xo"
          , we = le ? "" : "/front"
          , _e = function(e, t) {
            1 === e.data.status ? t(e.data) : Object(f["a"])(e.data.msg)
        }
          , ye = {
            STATUS_ERR: pe,
            STATUS_OK: ve,
            REQUEST_URL: fe,
            LOGIN_URL: he,
            LOGIN_URL_MP: me,
            ICON_URL_NOEXT: ge,
            debug: le,
            resultHandle: _e,
            ROOT_DIR: we,
            VERIFY_REQUEST_URL: de
        }
          , Ce = {
            userInfo: {},
            actionType: null,
            leaveReturnSchoolType: null,
            leaveCountDownSecond: null,
            returnSchoolTime: null
        }
          , Se = Ce
          , Te = function(e) {
            return e.userInfo
        }
          , be = {
            updateUserInfo: function(e, t) {
                e.userInfo = t
            },
            updateLeaveCountDownSecond: function(e, t) {
                e.leaveCountDownSecond = t
            },
            updateActionType: function(e, t) {
                e.actionType = t
            },
            updateReturnSchoolTime: function(e, t) {
                e.returnSchoolTime = t
            },
            updateLeaveReturnType: function(e, t) {
                e.leaveReturnSchoolType = t
            }
        }
          , Re = be
          , xe = n("bc3a")
          , Ie = n.n(xe)
          , Le = function() {
            var e = Object(C["a"])(regeneratorRuntime.mark((function e(t) {
                return regeneratorRuntime.wrap((function(e) {
                    while (1)
                        switch (e.prev = e.next) {
                        case 0:
                        case "end":
                            return e.stop()
                        }
                }
                ), e)
            }
            )));
            return function(t) {
                return e.apply(this, arguments)
            }
        }()
          , $e = n("b054")
          , Oe = n.n($e);
        w["a"].use(T["a"]);
        var je = new T["a"].Store({
            state: Se,
            getters: a,
            mutations: Re,
            actions: o,
            plugins: ye.debug ? [Oe()()] : []
        })
          , Ee = (n("9d62"),
        n("51f2"),
        n("4328"))
          , ke = n.n(Ee)
          , De = n("dc02");
        w["a"].config.productionTip = !1;
        var Ae = G("Authorization");
        Ae && z(Ae);
        var qe = B();
        qe && (Ie.a.defaults.headers.common["Authorization"] = qe),
        w["a"].prototype.$apiConfig = ye,
        w["a"].prototype.$axios = Ie.a,
        w["a"].prototype.$qs = ke.a,
        w["a"].use(De["a"]),
        w["a"].use(i["a"]).use(r["a"]).use(s["a"]).use(c["a"]).use(u["a"]).use(l["a"]).use(f["a"]).use(d["a"]).use(p["a"]).use(v["a"]).use(h["a"]).use(m["a"]).use(g["a"]),
        new w["a"]({
            router: ce,
            store: je,
            render: function(e) {
                return e(L)
            }
        }).$mount("#app")
    },
    6092: function(e, t, n) {},
    "661a": function(e, t, n) {
        "use strict";
        n("6092")
    },
    "9d62": function(e, t, n) {
        n("1913");
        var a = {
            fontsize: function(e) {
                function t() {
                    var t = 100
                      , n = document.documentElement.clientWidth;
                    n > 750 && (n = 750);
                    var a = t * n / e;
                    document.getElementsByTagName("html")[0].style.fontSize = a + "px"
                }
                t(),
                window.onresize = t
            }
        };
        a.fontsize(750)
    },
    a367: function(e, t, n) {},
    b457: function(e, t, n) {},
    b767: function(e, t, n) {
        "use strict";
        n("a367")
    },
    baac: function(e, t, n) {
        "use strict";
        n("d005")
    },
    d005: function(e, t, n) {}
});
